<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>Red Hat JBoss Data Grid Image</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="book">
<div id="header">
<h1>Red Hat JBoss Data Grid Image</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat JBoss Data Grid is available as a containerized xPaaS image that is designed for use with OpenShift.  This image provides an in-memory distributed database so that developers can quickly access large amounts of data in a hybrid environment.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
There are significant differences in supported configurations and functionality
in the JBoss Data Grid xPaaS image compared to the full, non-PaaS release of JBoss Data Grid.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This topic details the differences between the JBoss Data Grid xPaaS image and the
full, non-PaaS release of JBoss Data Grid, and provides instructions specific to running and
configuring the JBoss Data Grid xPaaS image. Documentation for other JBoss Data Grid
functionality not specific to the JBoss Data Grid xPaaS image can be found in the
<a href="https://access.redhat.com/documentation/en/red-hat-jboss-data-grid/">JBoss
Data Grid documentation on the Red Hat Customer Portal</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comparison_between_product_and_image">Comparison between product and image</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_functionality_differences_for_openshift_jboss_data_grid_xpaas_images">Functionality Differences for OpenShift JBoss Data Grid xPaaS Images</h3>
<div class="paragraph">
<p>There are several major functionality differences in the OpenShift JBoss Data Grid xPaaS image:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The JBoss Data Grid Management Console is not available <a href="#Managing-OpenShift-JBoss-Data-Grid-xPaaS-Images">to manage OpenShift JBoss Data Grid xPaaS images</a>.</p>
</li>
<li>
<p>The JBoss Data Grid Management CLI is only bound locally. This means that you can only access the Management CLI of a container from within the pod.</p>
</li>
<li>
<p>Library mode is not supported.</p>
</li>
<li>
<p>Only JDBC is supported for a backing cache-store.  Support for remote cache stores are present only for data migration purposes.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="jdg-clustering">Forming a Cluster using the OpenShift JBoss Data Grid xPaaS Images</h3>
<div class="paragraph">
<p>Clustering is achieved through one of two discovery mechanisms: Kubernetes or DNS.  This
is accomplished by configuring the JGroups protocol stack in <strong><em>clustered-openshift.xml</em></strong> with either
the <strong><em>&lt;openshift.KUBE_PING/&gt;</em></strong> or <strong><em>&lt;openshift.DNS_PING/&gt;</em></strong> elements.  By default <strong><em>KUBE_PING</em></strong> is the
pre-configured and supported protocol.</p>
</div>
<div class="paragraph">
<p>For <strong><em>KUBE_PING</em></strong> to work the following steps must be taken:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <strong><em>OPENSHIFT_KUBE_PING_NAMESPACE</em></strong> environment variable must be set (as seen in the <a href="#jdg-configuration-environment-variables-table">Configuration Environment Variables</a>).
If this variable is not set, then the server will act as if it is a single-node cluster, or a cluster that consists of only one node.</p>
</li>
<li>
<p>The <strong><em>OPENSHIFT_KUBE_PING_LABELS</em></strong> environment variable must be set (as seen in the <a href="#jdg-configuration-environment-variables-table">Configuration Environment Variables</a>).
If this variable is not set, then pods outside the application (but in the same namespace) will attempt to join.</p>
</li>
<li>
<p>Authorization must be granted to the service account the pod is running under to be allowed to Kubernetes' REST api.  This is done on the
command line:</p>
<div class="exampleblock">
<div class="title">Example 1. Policy commands</div>
<div class="content">
<div class="paragraph">
<p>Using the <strong><em>default</em></strong> service account in the <strong><em>myproject</em></strong> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc policy add-role-to-user view system:serviceaccount:$(oc project -q):default -n $(oc project -q)</pre>
</div>
</div>
<div class="paragraph">
<p>Using the <strong><em>eap-service-account</em></strong> in the <strong><em>myproject</em></strong> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc policy add-role-to-user view system:serviceaccount:$(oc project -q):eap-service-account -n $(oc project -q)</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the above is configured images will automatically join the cluster as they are deployed;
however, removing images from an active cluster, and therefore shrinking the cluster,
is not supported.</p>
</div>
</div>
<div class="sect2">
<h3 id="jdg-endpoints">Endpoints</h3>
<div class="paragraph">
<p>Clients can access JBoss Data Grid via REST, HotRod, and memcached endpoints defined as usual in the cache&#8217;s configuration.</p>
</div>
<div class="paragraph">
<p>If a client attempts to access a cache via HotRod and is in the same project it will be able to receive
the full cluster view and make use of consistent hashing; however, if it is in another project then the
client will unable to receive the cluster view.  Additionally, if the client is located outside of the
project that contains the HotRod cache there will be additional latency due to extra network hops
being required to access the cache.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Only caches with an exposed REST endpoint will be accessible outside of OpenShift.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="jdg-configuring-caches">Configuring Caches</h3>
<div class="paragraph">
<p>A list of caches may be defined by the <strong><em>CACHE_NAMES</em></strong> environment variable.  By default the
following caches are created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><em>default</em></strong></p>
</li>
<li>
<p><strong><em>memcached</em></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each cache&#8217;s behavior may be controlled through the use of cache-specific environment variables, with
each environment variable expecting the cache&#8217;s name as the prefix.  For instance, consider the <strong><em>default</em></strong> cache,
any configuration applied to this cache must begin with the <strong><em>DEFAULT_</em></strong> prefix.  To define the number of cache entry owners
for each entry in this cache the <strong><em>DEFAULT_CACHE_OWNERS</em></strong> environment variable would be used.</p>
</div>
<div class="paragraph">
<p>A full list of these is found at <a href="#jdg-cache-environment-variables">Cache Environment Variables</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="jdg-datasources">Datasources</h3>
<div class="paragraph">
<p>Datasources are automatically created based on the value of some environment variables.</p>
</div>
<div class="paragraph">
<p>The most important variable is the <strong><em>DB_SERVICE_PREFIX_MAPPING</em></strong> which defines JNDI mappings for
datasources.  It must be set to a comma-separated list of <strong><em>&lt;name&gt;</em>&lt;database_type&gt;=&lt;PREFIX&gt; triplet, where
*<em>name</em></strong> is used as the pool-name in the datasource, <strong><em>database_type</em></strong> determines which database driver to use,
and <strong><em>PREFIX</em></strong> is the prefix used in the names of environment variables, which are used to configure the datasource.</p>
</div>
<div class="sect3">
<h4 id="jdg-jndi-mappings-for-datasources">JNDI Mappings for Datasources</h4>
<div class="paragraph">
<p>For each <strong><em>&lt;name&gt;-database_type&gt;=PREFIX</em></strong> triplet in the <strong><em>DB_SERVICE_PREFIX_MAPPING</em></strong> environment
variable, a separate datasource will be created by the launch script, which is executed when running the image.</p>
</div>
<div class="paragraph">
<p>The <strong><em>&lt;database_type&gt;</em></strong> will determine the driver for the datasource.  Currently, only <strong><em>postgresql</em></strong> and <strong><em>mysql</em></strong>
are supported.</p>
</div>
<div class="paragraph">
<p>The <strong><em>&lt;name&gt;</em></strong> parameter can be chosen on your own.  Do not use any special characters.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The first part (before the equal sign) of the <strong><em>DB_SERVICE_PREFIX_MAPPING</em></strong> should be lowercase.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="jdg-database-drivers">Database Drivers</h4>
<div class="paragraph">
<p>The JBoss Data Grid xPaaS image contains Java drivers for MySQL, PostgreSQL, and MongoDB
databases deployed.  Datasources are <strong>generated only for MySQL and PostGreSQL databases</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For MongoDB databases there are no JNDI mappings created because this is not a SQL database.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="jdg-database-drivers-examples">Examples</h4>
<div class="paragraph">
<p>The following examples demonstrate how datasources may be defined using the <strong><em>DB_SERVICE_PREFIX_MAPPING</em></strong>
environment variable.</p>
</div>
<div class="sect4">
<h5 id="jdg-single-mapping">Single Mapping</h5>
<div class="paragraph">
<p>Consider the value <strong><em>test-postgresql=TEST</em></strong>.</p>
</div>
<div class="paragraph">
<p>This will create a datasource named <strong><em>java:jboss/datasources/test_postgresql</em></strong>.  Additionally, all of the required settings,
such as username and password, will be expected to be provided as environment variables with the <strong><em>TEST_</em></strong> prefix, such as
<strong><em>TEST_USERNAME</em></strong> and <strong><em>TEST_PASSWORD</em></strong>.</p>
</div>
</div>
<div class="sect4">
<h5 id="jdg-mulitple-mappings">Multiple Mappings</h5>
<div class="paragraph">
<p>Multiple database mappings may also be specified; for instance, considering the following value for the <strong><em>DB_SERVICE_PREFIX_MAPPING</em></strong>
environment variable: <strong><em>cloud-postgresql=CLOUD,test-mysql=TEST_MYSQL</em></strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Multiple datasource mappings should be separated with commas, as seen in the above example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This will create two datasources:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><em>java:jboss/datasources/test_mysql</em></strong></p>
</li>
<li>
<p><strong><em>java:jboss/datasources/cloud_postgresql</em></strong></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>MySQL datasource configuration, such as the username and password, will be expected with the <strong><em>TEST_MYSQL</em></strong> prefix,
for example <strong><em>TEST_MYSQL_USERNAME</em></strong>.  Similarly the PostgreSQL datasource will expect to have environment variables
defined with the <strong><em>CLOUD_</em></strong> prefix, such as <strong><em>CLOUD_USERNAME</em></strong>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="jdg-datasource-environment-variables">Environment Variables</h4>
<div class="paragraph">
<p>A full list of datasource environment variables may be found at <a href="#jdg-datasource-environment-variables-list">Datasource Environment Variables</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jdg-security-domains">Security Domains</h3>
<div class="paragraph">
<p>To configure a new Security Domain the <strong><em>SECDOMAIN_NAME</em></strong> environment variable must be defined, which will result
in the creation of a security domain named after the passed in value.  This domain may be configured through the use
of the <a href="#jdg-security-environment-variables">Security Environment Variables</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Managing-OpenShift-JBoss-Data-Grid-xPaaS-Images">Managing OpenShift JBoss Data Grid xPaaS Images</h3>
<div class="paragraph">
<p>A major difference in managing an OpenShift JBoss Data Grid xPaaS image is that there is no Management Console exposed for the JBoss Data Grid installation inside the image. Because images are intended to be immutable, with modifications being written to a non-persistent file system, the Management Console is not exposed.</p>
</div>
<div class="paragraph">
<p>However, the JBoss Data Grid Management CLI (<strong><em>JDG_HOME/bin/jboss-cli.sh</em></strong>) is still
accessible from within the container for troubleshooting purposes.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First open a remote shell session to the running pod:</p>
<div class="listingblock">
<div class="content">
<pre>$ oc rsh &lt;pod_name&gt;</pre>
</div>
</div>
</li>
<li>
<p>Then run the following from the remote shell session to launch the JBoss Data Grid
Management CLI:</p>
<div class="listingblock">
<div class="content">
<pre>$ /opt/datagrid/bin/jboss-cli.sh</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Any configuration changes made using the JBoss Data Grid Management CLI on a running container will be lost when the container restarts.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="#Making-Configuration-Changes-Data-Grid">Making configuration changes to the
JBoss Data Grid instance inside the JBoss Data Grid xPaaS image</a> is different from the process you may be used to for a regular release of JBoss Data Grid.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_initial_setup">Initial Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Red Hat xPaaS middleware images were
<a href="../../install_config/imagestreams_templates.html">automatically created during the installation</a>
of OpenShift along with the other default image streams and templates.</p>
</div>
<div class="paragraph">
<p>You can make changes to the JBoss Data Grid configuration in the xPaaS image using either the S2I templates, or by using a modified JBoss Data Grid xPaaS image.</p>
</div>
<div class="sect2">
<h3 id="_using_the_jboss_data_grid_xpaas_image_source_to_image_s2i_process">Using the JBoss Data Grid xPaaS Image Source-to-Image (S2I) Process</h3>
<div class="paragraph">
<p>The recommended method to run and configure the OpenShift JBoss Data Grid xPaaS image is to use the OpenShift S2I process together with the application template parameters and environment variables.</p>
</div>
<div class="paragraph">
<p>The S2I process for the JBoss Data Grid xPaaS image works as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If there is a <strong><em>pom.xml</em></strong> file in the source repository, a Maven build is triggered with the contents of <code><strong>$MAVEN_ARGS</strong></code> environment variable.</p>
</li>
<li>
<p>By default the <code>package</code> goal is used with the <code>openshift</code> profile, including the system properties for skipping tests (<code><strong>-DskipTests</strong></code>) and enabling the Red Hat GA repository (<code><strong>-Dcom.redhat.xpaas.repo.redhatga</strong></code>).</p>
</li>
<li>
<p>The results of a successful Maven build are copied to <strong><em>JDG_HOME/standalone/deployments</em></strong>. This includes all JAR, WAR, and EAR files from the directory within the source repository specified by <code><strong>$ARTIFACT_DIR</strong></code> environment variable. The default value of <code><strong>$ARTIFACT_DIR</strong></code> is the <strong><em>target</em></strong> directory.</p>
<div class="ulist">
<ul>
<li>
<p>Any JAR, WAR, and EAR in the <strong><em>deployments</em></strong> source repository directory are copied to the <strong><em>JDG_HOME/standalone/deployments</em></strong> directory.</p>
</li>
<li>
<p>All files in the <strong><em>configuration</em></strong> source repository directory are copied to <strong><em>JDG_HOME/standalone/configuration</em></strong>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you want to use a custom JBoss Data Grid configuration file, it should be named <strong><em>clustered-openshift.xml</em></strong>.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>All files in the <strong><em>modules</em></strong> source repository directory are copied to <strong><em>JDG_HOME/modules</em></strong>.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_using_a_different_jdk_version_in_the_jboss_data_grid_xpaas_image">Using a Different JDK Version in the JBoss Data Grid xPaaS Image</h4>
<div class="paragraph">
<p>The JBoss Data Grid xPaaS image may come with multiple versions of OpenJDK installed, but only one is the default. For example, the JBoss Data Grid 6.5 xPaaS image comes with OpenJDK 1.7 and 1.8 installed, but OpenJDK 1.8 is the default.</p>
</div>
<div class="paragraph">
<p>If you want the JBoss Data Grid xPaaS image to use a different JDK version than the default, you must:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that your <strong><em>pom.xml</em></strong> specifies to build your code using the intended JDK version.</p>
</li>
<li>
<p>In the S2I application template, configure the image&#8217;s <code><strong>JAVA_HOME</strong></code> environment variable to point to the intended JDK version. For example:</p>
<div class="listingblock">
<div class="content">
<pre>{
  "name": "JAVA_HOME",
  "value": "/usr/lib/jvm/java-1.7.0"
}</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_modified_jboss_data_grid_xpaas_image">Using a Modified JBoss Data Grid xPaaS Image</h3>
<div class="paragraph">
<p>An alternative method is to make changes to the image, and then use that modified image in OpenShift.</p>
</div>
<div class="paragraph">
<p>The JBoss Data Grid configuration file that OpenShift uses inside the JBoss Data Grid xPaaS image is <strong><em>JDG_HOME/standalone/configuration/clustered-openshift.xml</em></strong>, and the JBoss Data Grid startup script is <strong><em>JDG_HOME/bin/openshift-launch.sh</em></strong>.</p>
</div>
<div class="paragraph">
<p>You can run the JBoss Data Grid xPaaS image in Docker, make the required configuration changes using the JBoss Data Grid Management CLI (<strong><em>JDG_HOME/bin/jboss-cli.sh</em></strong>), and then commit the changed container as a new image. You can then use that modified image in OpenShift.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is recommended that you do not replace the OpenShift placeholders in the JBoss Data Grid xPaaS configuration file, as they are used to automatically configure services (such as messaging, datastores, HTTPS) during a container&#8217;s deployment. These configuration values are intended to be set using environment variables.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Ensure that you follow the   <a href="../../creating_images/guidelines.html">guidelines for creating images</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reference">Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_information_environment_variables">Information Environment Variables</h3>
<div class="paragraph">
<p>The following information environment variables are designed to convey information about the image and should not be modified by the user:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Information Environment Variables</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JBOSS_DATAGRID_VERSION</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The full, non-PaaS release that the xPaaS image is based from.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>6.5.1.GA</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JBOSS_HOME</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The directory where the JBoss distribution is located.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>/opt/datagrid</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JBOSS_IMAGE_NAME</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image name, same as <strong><em>Name</em></strong> label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>jboss-datagrid-6/datagrid65-openshift</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JBOSS_IMAGE_RELEASE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image release, same as <strong><em>Release</em></strong> label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: dev</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JBOSS_IMAGE_VERSION</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image version, same as <strong><em>Version</em></strong> label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>1.2</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JBOSS_MODULES_SYSTEM_PKGS</em></strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>org.jboss.logmanager</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JBOSS_PRODUCT</em></strong></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>datagrid</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>LAUNCH_JBOSS_IN_BACKGROUND</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows the data grid server to be gracefully shutdown even when there is no terminal attached.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>true</em></strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jdg-configuration-environment-variables">Configuration Environment Variables</h3>
<div class="paragraph">
<p>Configuration environment variables are designed to conveniently adjust the image without requiring a rebuild, and should be set by the user as desired.</p>
</div>
<table id="jdg-configuration-environment-variables-table" class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Configuration Environment Variables</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>CACHE_CONTAINER_START</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should this cache container be started on server startup, or lazily when requested by a service or deployment.  Defaults to <strong><em>LAZY</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>EAGER</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>CACHE_CONTAINER_STATISTICS</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines if the cache container collects statistics.  Disable for optimal performance.  Defaults to <strong><em>true</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>false</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>CACHE_NAMES</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of caches to configure.  Defaults to <strong><em>default,memcached</em></strong>, and each defined cache will be configured as a distributed-cache with a mode of <strong><em>SYNC</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>addressbook,addressbook_indexed</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>CONTAINER_SECURITY_CUSTOM_ROLE_MAPPER_CLASS</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class of the custom principal to role mapper.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>com.acme.CustomRoleMapper</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>CONTAINER_SECURITY_IDENTITY_ROLE_MAPPER</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set a role mapper for this cache container.  Valid values are: <strong><em>identity-role-mapper</em></strong>,<strong><em>common-name-role-mapper</em></strong>,<strong><em>cluster-role-mapper</em></strong>,<strong><em>custom-role-mapper</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>identity-role-mapper</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>CONTAINER_SECURITY_ROLES</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define role names and assign permissions to them.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>admin=ALL,reader=READ,writer=WRITE</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>DB_SERVICE_PREFIX_MAPPING</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define a comma-separated list of datasources to configure.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>test-mysql=TEST_MYSQL</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>DEFAULT_CACHE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the default cache for this cache container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>addressbook</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>ENCRYPTION_REQUIRE_SSL_CLIENT_AUTH</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to require client certificate authentication.  Defaults to <strong><em>false</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>true</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>HOTROD_AUTHENTICATION</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If defined the hotrod-connectors will be configured with authentication in the <strong><em>ApplicationRealm</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>true</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>HOTROD_ENCRYPTION</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If defined the hotrod-connectors will be configured with encryption in the <strong><em>ApplicationRealm</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>true</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>HOTROD_SERVICE_NAME</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the OpenShift service used to expose HotRod externally.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>DATAGRID_APP_HOTROD</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>INFINISPAN_CONNECTORS</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of connectors to configure.  Defaults to <strong><em>hotrod,memcached,rest</em></strong>.  Note that if authorization or authentication is enabled on the cache then memcached should be removed as this protocol is inherently insecure.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>hotrod</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JAVA_OPTS_APPEND</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The contents of <strong><em>JAVA_OPTS_APPEND</em></strong> is appended to <strong><em>JAVA_OPTS</em></strong> on startup.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>-Dfoo=bar</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JGROUPS_CLUSTER_PASSWORD</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A password to control access to JGroups.  Needs to be set consistently cluster-wide.  The image default is to use the <strong><em>OPENSHIFT_KUBE_PING_LABELS</em></strong> variable value; however, the JBoss application templates generate and supply a random value.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>miR0JaDR</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>MEMCACHED_CACHE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the cache to use for the Memcached connector.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>memcached</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>OPENSHIFT_KUBE_PING_LABELS</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clustering labels selector.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>application=eap-app</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>OPENSHIFT_KUBE_PING_NAMESPACE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clustering project namespace.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>myproject</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>PASSWORD</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the JDG user.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>p@ssw0rd</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>REST_SECURITY_DOMAIN</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The security domain to use for authentication and authorization purposes.  Defaults to <strong><em>none</em></strong> (no authentication).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>other</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>TRANSPORT_LOCK_TIMEOUT</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Infinispan uses a distributed lock to maintain a coherent transaction log during state transfer or rehashing, which means that only one cache can be doing state transfer or rehashing at the same time.  This constraint is in place because more than one cache could be involved in a transaction.  This timeout controls the time to wait to acquire a distributed lock.  Defaults to <strong><em>240000</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>120000</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>USERNAME</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for the JDG user.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Example: <strong><em>openshift</em></strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jdg-cache-environment-variables">Cache Environment Variables</h3>
<div class="paragraph">
<p>The following environment variables all control behavior of individual caches; when defining these values for a particular cache substitute the cache&#8217;s name for <strong><em>CACHE_NAME</em></strong>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Cache Environment Variables</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_TYPE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines whether this cache should be distributed or replicated.  Defaults to <strong><em>distributed</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>replicated</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_START</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines if this cache should be started on server startup, or lazily when requested by a service or deployment.  Defaults to <strong><em>LAZY</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>EAGER</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_BATCHING</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables invocation batching for this cache.  Defaults to <strong><em>false</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>true</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_STATISTICS</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determines whether or not the cache collects statistics.  Disable for optimal performance.  Defaults to <strong><em>true</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>false</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_MODE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the clustered cache mode, <strong><em>ASYNC</em></strong> for asynchronous operations, or <strong><em>SYNC</em></strong> for synchronous operations.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>ASYNC</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_QUEUE_SIZE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <strong><em>ASYNC</em></strong> mode this attribute can be used to trigger flushing of the queue when it reaches a specific threshold.  Defaults to <strong><em>0</em></strong>, which disables flushing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>100</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_QUEUE_FLUSH_INTERVAL</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <strong><em>ASYNC</em></strong> mode this attribute controls how often the asynchronous thread runs to flush the replication queue.  This should be a positive integer that represents thread wakeup time in milliseconds.  Defaults to <strong><em>10</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>20</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_REMOTE_TIMEOUT</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <strong><em>SYNC</em></strong> mode the timeout, in milliseconds, used to wait for an acknowledgement when making a remote call, after which the call is aborted and an exception is thrown.  Defaults to <strong><em>17500</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>25000</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_OWNERS</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of cluster-wide replicas for each cache entry.  Defaults to <strong><em>2</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>5</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_SEGMENTS</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of hash space segments per cluster.  The recommended value is 10 * cluster size.  Defaults to <strong><em>80</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>30</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_L1_LIFESPAN</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum lifespan, in milliseconds, of an entry placed in the L1 cache.  Defaults to <strong><em>0</em></strong>, indicating that L1 is disabled.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>100</em></strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_EVICTION_STRATEGY</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the cache eviction strategy.  Available options are <strong><em>UNORDERED</em></strong>, <strong><em>FIFO</em></strong>, <strong><em>LRU</em></strong>, <strong><em>LIRS</em></strong>, and <strong><em>NONE</em></strong> (to disable eviction).  Defaults to <strong><em>NONE</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>FIFO</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_EVICTION_MAX_ENTRIES</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of entries in a cache instance.  If selected value is not a power of two the actual value will default to the least power of two larger than the selected value.  A value of <strong><em>-1</em></strong> indicates no limit.  Defaults to <strong><em>10000</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>-1</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_EXPIRATION_LIFESPAN</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum lifespan, in milliseconds, of a cache entry, after which the entry is expired cluster-wide.  Defaults to <strong><em>-1</em></strong>, indicating that the entries never expire.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>10000</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_EXPIRATION_MAX_IDLE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum idle time, in milliseconds, a cache entry will be maintained in the cache.  If the idle time is exceeded, then the entry will be expired cluster-wide.  Defaults to <strong><em>-1</em></strong>, indicating that the entries never expire.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>10000</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_EXPIRATION_INTERVAL</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval, in milliseconds, between subsequent runs to purge expired entries from memory and any cache stores.  If you wish to disable the periodic eviction process altogether, then set the interval to <strong><em>-1</em></strong>.  Defaults to <strong><em>5000</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>-1</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_COMPATIBILITY_ENABLED</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables compatibility mode for this cache.  Disabled by default.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>true</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_COMPATIBILITY_MARSHALLER</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A marshaller to use for compatibility conversions.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>com.acme.CustomMarshaller</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_JDBC_STORE_TYPE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of JDBC store to configure.  This value may either be <strong><em>string</em></strong> or <strong><em>binary</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>string</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_JDBC_STORE_DATASOURCE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the jndiname of the datasource.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>java:jboss/datasources/ExampleDS</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_KEYED_TABLE_PREFIX</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the prefix prepended to the cache name used when composing the name of the cache entry table.  Defaults to <strong><em>ispn_entry</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>JDG</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_INDEX</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The indexing mode of the cache.  Valid values are <strong><em>NONE</em></strong>, <strong><em>LOCAL</em></strong>, and <strong><em>ALL</em></strong>.  Defaults to <strong><em>NONE</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>ALL</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_INDEXING_PROPERTIES</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of properties to pass on to the indexing system.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>default.directory_provider=ram</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_SECURITY_AUTHORIZATION_ENABLED</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables authorization checks for this cache.  Defaults to <strong><em>false</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>true</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_SECURITY_AUTHORIZATION_ROLES</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the valid roles required to access this cache.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>admin,reader,writer</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;CACHE_NAME&gt;_CACHE_PARTITION_HANDLING_ENABLED</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If enabled, then the cache will enter degraded mode when it loses too many nodes.  Defaults to <strong><em>true</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>false</em></strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jdg-datasource-environment-variables-list">Datasource Environment Variables</h3>
<div class="paragraph">
<p>Datasource properties may be configured with the following environment variables:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Datasource Environment Variables</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;NAME&gt;</em>&lt;DATABASE_TYPE&gt;_SERVICE_HOST_</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the database server&#8217;s hostname or IP to be used in the datasource&#8217;s <strong><em>connection_url</em></strong> property.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>192.168.1.3</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;NAME&gt;_DATABASE_TYPE&gt;_SERVICE_PORT</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the database server&#8217;s port for the datasource.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>5432</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;PREFIX&gt;_JNDI</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the JNDI name for the datasource.  Defaults to <strong><em>java:jboss/datasources/&lt;name&gt;</em>&lt;database_type&gt;_</strong>, where <strong><em>name</em></strong> and <strong><em>database_type</em></strong> are taken from the triplet definition.  This setting is useful if you want to override the default generated JNDI name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>java:jboss/datasources/test-postgresql</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;PREFIX&gt;_USERNAME</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the username for the datasource.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>admin</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;PREFIX&gt;_PASSWORD</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the password for the datasource.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>password</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;PREFIX&gt;_DATABASE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the database name for the datasource.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>myDatabase</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;PREFIX&gt;_TX_ISOLATION</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the java.sql.Connection transaction isolation level for the database.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>TRANSACTION_READ_UNCOMMITTED</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;PREFIX&gt;_TX_MIN_POOL_SIZE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the minimum pool size option for the datasource.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>1</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>&lt;PREFIX&gt;_TX_MAX_POOL_SIZE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the maximum pool size option for the datasource.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>20</em></strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jdg-security-environment-variables">Security Environment Variables</h3>
<div class="paragraph">
<p>The following environment variables may be defined to customize the environment&#8217;s security domain:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Security Environment Variables</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>SECDOMAIN_NAME</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define in order to enable the definition of an additional security domain.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>myDomain</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>SECDOMAIN_PASSWORD_STACKING</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If defined, the password-stacking module option is enabled and set to the value <strong><em>useFirstPass</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>true</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>SECDOMAIN_LOGIN_MODULE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The login module to be used.  Defaults to <strong><em>UsersRoles</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>UsersRoles</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>SECDOMAIN_USERS_PROPERTIES</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the properties file containing user definitions.  Defaults to <strong><em>users.properties</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>users.properties</em></strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>SECDOMAIN_ROLES_PROPERTIES</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the properties file containing role definitions.  Defaults to <strong><em>roles.properties</em></strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>roles.properties</em></strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="jdg-exposed-ports">Exposed Ports</h3>
<div class="paragraph">
<p>The following ports are exposed by default in the JBoss Data Grid xPaaS Image:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secure Web</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8778</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11211</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">memcached</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11222</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">internal hotrod</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11333</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">external hotrod</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The external hotrod connector is only available if the <strong><em>HOTROD_SERVICE_NAME</em></strong> environment variables has been defined.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="jdg-troubleshooting">Troubleshooting</h3>
<div class="paragraph">
<p>In addition to viewing the OpenShift logs, you can troubleshoot a running JBoss Data Grid xPaaS Image container by viewing its logs. These are outputted to the container’s standard out, and are accessible with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ oc logs -f &lt;pod_name&gt; &lt;container_name&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
By default, the OpenShift JBoss Data Grid xPaaS Image does not have a file log handler configured. Logs are only sent to the container&#8217;s standard out.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-04-03 07:52:51 AEST
</div>
</div>
</body>
</html>